- 数据库设计（数据流图，ER图，数据字典）2天
  - 类图（需要确定数据字典）1天
- 时序图+通信图？（需要确定类）1天   yl+zwq  （4号24点前）
  - 状态图（构建图？部署图？）1天

现在就行：

- 系统边界和上下文  yl
- 非功能性需求  msb
- 相关术语定义和参考资料 zwq

顺序：

1. 数据库（讨论）+时序图
2. 类图+状态图

讨论目标：

1、确定顶层数据流图     yl

- 实体

  系统管理员、买家、卖家、快递公司、支付机构
- 关联

  买家->系统  商品搜索信息、商品评价

  系统->买家 订单信息、账户信息

  卖家 ————> 系统：商品信息、注册信息

  系统—————>卖家：订单信息、销售信息、账户信息、退货、留言提醒

  卖家<->系统 留言

  系统 ————>支付机构：支付信息
  支付机构—————>系统：支付结果

2、确定一层数据流图框架

- 确定子管理系统

  用户（1）、商品（2）、订单（3）、留言（4）、评价（5）、退货（6）、支付（7）
- 确定数据库

  用户：用户信息（1）

  商品：商品信息（2）+留言信息（3）+用户信息（卖家）

  订单：商品信息+用户信息+订单信息（4）

  留言：留言信息+用户信息+商品信息

  评价：用户信息+评价信息（5）+商品信息（评价）

  退货：退货信息（6）+订单信息

  支付：订单信息

3、确定二层数据流图框架 (3号6点前)

- 确定加工项

  用户：注册+修改+查看+审核	msb

  商品：上架+修改+查询+下架+审核	msb

  订单：生成+查看+修改（地址）+取消+结束+确认收货+填写物流	yl

  留言：留言+回复+留言提醒+删除	yl

  评价：提交+修改+删除+回复	zwq

  退货：提交申请+卖家审核+填写物流+确认货物+结束    zwq

  支付：选择支付方式+第三方支付接口+取消支付 	msb

1. 全局数据流图 MSB
2. ER图 YL

   实体：

   ```
   系统管理员：账号、密码、姓名、昵称、性别
   ```

   ```
   用户：账号、昵称、姓名、身份证号、性别、出生年月、收货地址、联系电话、密码、信誉积分
   ```

   ```
   商品：ID、图片、单价、库存、描述、用户账号、上架时间	（用户账号为外键）
   ```

   ```
   评价：ID、描述、图片、分数、时间    （用户ID、订单ID为外键）123
   ```

   ```
   订单：ID、物流单号、数量、地址、联系电话、时间、是否完成	（买家账号、商品ID为外键）
   ```

   ```
   留言：ID、描述、时间	（用户ID、商品ID、回复留言ID为外键）
   ```

   ```
   退货订单：ID、地址、原因、时间、物流单号、是否完成	（买家ID、订单ID为外键）
   ```

   联系：

   ```
   审核商品：系统管理员、商品（审核结果、时间）（1：N）
   ```

   ```
   审核用户：系统管理员 、用户（审核结果、时间） （1：N）
   ```

   ```
   发表：用户、评价 （1：N）
   ```

   ```
   购买：订单、用户、商品 （N：1：1）
   ```

   ```
   发表：用户、留言（1：N）
   ```

   ```
   退货：用户、退货订单、订单 （1：1：1）
   ```

   ```
   属于：商品、留言（1：N）
   ```

   ```
   属于：7评价、订单（1：1）
   ```

   ```
   回复：被回复留言、回复留言（1：N）
   ```
3. 数据字典 自己写自己的

   ```
   用户（1）
   ```

   ```
   商品（2）
   ```

   ```
   订单（3）
   ```

   ```
   留言（4）
   ```

   ```
   评价（5）
   ```

   ```
   退货（6）
   ```

   ```
   支付（7）
   ```

   这几天的图、文字所有的整合（ZWQ）
4. 状态图

   - ```
     退货订单 zwq
     ```
   - ```
     订单
     ```
5. 类图

## 开发计划

> 前端：写html页面、css、js、表单结构管理和提交
>
> 前后端：路由部分、表单接收与处理、ajax
>
> 后端：数据库管理与交互、类的封装、业务逻辑（函数）编写

1. 用户管理模块

   1. 登陆
   2. 注册
   3. 重置密码

      > 前端：
      >
      > - 确保所有页面的表单可以正常提交
      > - 注册界面参考相关文件进行修改
      > - 忘记密码页面参照注册界面进行修改（邮箱、验证码、新密码、确认密码）
      > - 编写邮箱验证后
      >
      > 后端：
      >
      > - 用户类编写
      >   - 接口
      >     - 创建用户：参数（邮箱、密码、用户名）
      >     - 修改密码：参数（邮箱、密码）
      >     - 邮件验证：参数（邮箱），正常返回验证码，出错返回None
      > - 数据库
      > - 邮件
      >
      > 前后端
      >
      > - 页面导航（蓝图）、提示信息（ajax）
      > - 表单数据检验
      > - 调用后端接口(后端得先写好)
      >
   4. 信息修改
2. 商品管理

   1. 用户上架商品
   2. 商品展示页面
   3. 修改商品信息
   4. 下架商品

   > 前端：
   >
   > - ~~修改导航栏，让页面更加紧凑~~
   > - ~~添加”我的商品“页面，展示当前用户上架的商品，页面展示：商品id、商品名称、商品单价、商品库存  按钮有：查看（点击后跳转到商品详情页）、修改信息、下架~~
   > - ~~整个页面的右下方添加上架商品按钮，点击跳转到商品上架页面~~
   > - ~~将展示信息的表放大~~
   > - ~~以下拉栏的形式选择页面~~
   > - ~~上架页面，表单数据改为：价格、名称、库存、描述、图片~~
   > - ~~商品展示部分~~
   > - ~~删除顶部“上一页/~”等部分~~
   > - ~~调整单价和商品名称顺序，重点突出，去掉颜色和大小选~~择
   > - ~~添加留言分栏，留言页面编写（参考知乎的留言，保证有回复（弹窗）、删除功能）~~
   > - ~~注意，上传图片时~~
   >   - ~~前端的form表单必须加**enctype=“multipart/form-data”** 属性，**method必须为post~~**
   > - 在下拉栏中增加我的消息分栏，点击跳转到留言提醒页面（包含商品ID，留言用户，留言时间，查看按钮）
   >
   > 后端：
   >
   > - ~~地址增删改查(对用户查，包含id号,删除地址函数（两个参数：用户id，地址id，删除时验证地址是否属于该用户）)~~
   > - ~~商品类相关接口的编写（需要对商品进行修改的都要验证用户id）~~
   >   - ~~创建商品（参数：用户id，商品所需信息）~~
   >   - 下架商品（参数：用户id，下架商品id）
   >   - 修改信息（参数：用户id，修改后的商品信息）
   >   - ~~获取商品信息（参数：商品id）~~
   > - ~~留言获取删除回复留言~~
   > - ~~数据库图片建表（参考地址，[1,5] 张）~~
   > - ~~商品类加名称属性、图片（路径）~~
   > - 留言提醒表
   >   - 增加、删除、查询
   >   - 在留言创建时，自动添加提醒
   >
   > 前后端：
   >
3. 交易模块

   1. 用户检索商品

      > 前端：
      >
      > - ~~制作商品搜索结果页面，去掉爱心图标，其余保留~~
      > - 实现两个小按钮的功能
      >   - 详情页面跳转和加购
      >
      > 后端：
      >
      > - ~~实现按照关键词搜索功能，返回所有信息表~~
      >
      > 前后端：
      >
      > - ~~搜索关键词获取，及页面跳转~~
      >
   2. 购物车

      > 前端：
      >
      > - ajax实现，添加购物车，两个页面：
      >
      >   - 搜索页面的那个小图标（默认加1件）
      >   - ~~商品详情页面（根据选定的数量添加）~~
      > - ~~在购物车界面，用ajax实现~~
      >
      >   - ~~删除~~
      >   - ~~数量修改~~
      >
      > 后端：
      >
      > - ~~购物车表~~
      >   - ~~增加、删除、修改、查询、清空~~
      >
      > 前后端：
      >
      > - ~~与ajax对接，实现数量修改、删除~~
      >
   3. 下订单

      > 前端：
      >
      > - ~~结算页面~~
      > - 订单详情页面
      > - ~~实现地址单选功能~~
      >
      > 后端：
      >
      > - ~~订单~~
      > - ~~生成（地址id，商品id，购买用户id，数量）~~
      > - ~~支付~~
      >
   4. 查看订单信息

      > 前端：
      >
      > - ~~去掉历史订单分栏，添加“我的售卖”（卖家）、“订单”页面改为“我的购买”（买家）~~
      > - 我的售卖
      >   - 表字段：~~订单号，买家名称，商品名称，日期，数量，总价，物流单号~~，订单状态
      >   - ~~按钮：发货（弹窗填写物流单号，弹窗）~~
      > - 我的购买
      >   - ~~表字段：订单号，商品名称、日期、数量、总价、物流单号、订单状态~~
      >   - ~~按钮：确认收货（订单结束），退货（仅添加按钮即可）~~
      >
      > 后端：
      >
      > - ~~订单查询（返回订单信息表）~~
      > - ~~根据卖家查询~~
      > - ~~根据买家查询~~
      > - ~~修改状态（内部接口）~~
      >   - ~~待发货~~
      >   - ~~待收货~~
      >   - ~~完成~~
      >   - ~~退货中~~
      > - ~~发货功能（修改物流单号，修改订单状态）~~
      > - ~~确认收货~~
      > - ~~退货~~
      >
   5. 收货并评价

      > 前端：
      >
      > - ~~确认收货按钮跳转到评价页面~~
      > - ~~评价页面包含~~
      > - ~~打分(1-5分，用⭐展示)~~
      > - ~~描述~~
      > - ~~图片~~
      >
      > 后端：
      >
      > - ~~添加评价~~
      >   - ~~评价接口~~
      >
   6. 评价展示

      > 前端：
      >
      > - 商品详情页面添加评价展示分栏
      > - 展示信息包括
      >   - 用户名称
      >   - 分数（⭐）
      >   - 时间
      >   - 描述
      >   - 图片
      >
      > 后端：
      >
      > - 查询评价（商品ID）
      >
4. 退货模块

   1. 买家发起退货申请
   2. 卖家查看退货申请，同意或拒绝
      - 同意：订单状态改为确认退货，生成退货订单
      - 拒绝：订单状态改为待收货
   3. 买家发货（填写物流单号）
   4. 卖家查看退货订单，确认收货，退钱

   > 退货订单状态：
   >
   > - 0：待发货
   > - 1：待收货
   > - 2：确认收货
   >
   > 前端：
   >
   > - 退货按钮交互
   > -
   > -
   >
5. 后台管理模块

### 一些现有问题：

商品：

- ~~留言、加购、（修改）检查是否下架~~

购物车：

- 不返回已下架商品
- ~~小数位数固定~~
- ~~不要购物车下拉栏，点按钮直接跳转~~

结算页面：

- ~~如果用户没有可选地址，先跳转到地址页面添加地址~~

~~注册时，添加支付宝账号，个人信息中进行显示~~





- ~~商品页面添加状态、上架按钮（其实是上架申请）~~
- 后端
  - 用户添加权限（默认普通）
  - 商品增加状态（上架，下架，申请中，查询时返回商品状态）
  - 添加用户API处增加用户头像参数
  - 与商品相关过程中，检查商品状态
- ~~前端（页面做的像一点）~~
  - ~~两张表~~
    - ~~上架申请审核表：按照我的商品页面的信息来~~
      - ~~按钮：查看、同意、拒绝~~
    - ~~商品管理：按照我的商品页面的信息来~~
      - ~~按钮：下架~~

三个报告：

- 部署报告
- 用户手册
- 测试报告
